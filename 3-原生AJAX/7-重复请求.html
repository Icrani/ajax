<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>取消请求</title>
</head>
<body>
<button>点击发送</button>
</body>
<script>
    const btns = document.querySelectorAll('button')

    let x = null

    //表示变量
    let isSending = false

    btns[0].onclick = function () {
        if (isSending) x.abort() //如果说正在发送，则取消该请求，创建一个新的请求
        x = new XMLHttpRequest()
        //修改表示变量的值
        isSending = true
        x.open('GET', 'http://127.0.0.1:8000/delay')
        x.send()
        x.onreadystatechange = function () {
            if (x.readyState === 4) {
              //修改标识符变量
                isSending = false
            }
        }

        //
    }

</script>
</html>
